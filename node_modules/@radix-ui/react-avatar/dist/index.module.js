import{Primitive as e}from"@radix-ui/react-primitive";import{useLayoutEffect as t}from"@radix-ui/react-use-layout-effect";import{useCallbackRef as a}from"@radix-ui/react-use-callback-ref";import{createContextScope as r}from"@radix-ui/react-context";import*as o from"react";import n from"@babel/runtime/helpers/esm/extends";const[c,i]=r("Avatar");export{i as createAvatarScope};const[s,l]=c("Avatar");export const Avatar=/*#__PURE__*/o.forwardRef(((t,a)=>{const{__scopeAvatar:r,...c}=t,[i,l]=o.useState("idle");/*#__PURE__*/return o.createElement(s,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:l},/*#__PURE__*/o.createElement(e.span,n({},c,{ref:a})))}));/*#__PURE__*/export const AvatarImage=/*#__PURE__*/o.forwardRef(((r,c)=>{const{__scopeAvatar:i,src:s,onLoadingStatusChange:d=(()=>{}),...m}=r,u=l("AvatarImage",i),f=function(e){const[t,a]=o.useState("idle");return o.useEffect((()=>{if(!e)return void a("error");let t=!0;const r=new window.Image,o=e=>()=>{t&&a(e)};return a("loading"),r.onload=o("loaded"),r.onerror=o("error"),r.src=e,()=>{t=!1}}),[e]),t}(s),p=a((e=>{d(e),u.onImageLoadingStatusChange(e)}));return t((()=>{"idle"!==f&&p(f)}),[f,p]),"loaded"===f?/*#__PURE__*/o.createElement(e.img,n({},m,{ref:c,src:s})):null}));/*#__PURE__*/export const AvatarFallback=/*#__PURE__*/o.forwardRef(((t,a)=>{const{__scopeAvatar:r,delayMs:c,...i}=t,s=l("AvatarFallback",r),[d,m]=o.useState(void 0===c);return o.useEffect((()=>{if(void 0!==c){const e=window.setTimeout((()=>m(!0)),c);return()=>window.clearTimeout(e)}}),[c]),d&&"loaded"!==s.imageLoadingStatus?/*#__PURE__*/o.createElement(e.span,n({},i,{ref:a})):null}));/*#__PURE__*/export const Root=Avatar;export const Image=AvatarImage;export const Fallback=AvatarFallback;
//# sourceMappingURL=index.module.js.map
